# コマンドプレフィックスキーの設定
set-option -g prefix C-z
unbind-key C-b       # デフォルトのCtrl+Bは無効に

# PREFIX + r で設定ファイルをリロードする
bind r source-file ~/.config/tmux/tmux.conf \; display "Reloaded!"

# ウィンドウ、パネル操作のキーバインドを追加
bind-key | split-window -h
bind-key - split-window -v

bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R
bind-key -r C-h select-window -t :-
bind-key -r C-l select-window -t :+

bind-key -r H resize-pane -L 10
bind-key -r J resize-pane -D 10
bind-key -r K resize-pane -U 10
bind-key -r L resize-pane -R 10

# 色の設定（tmux 3.0+ 新形式）
## ステータスバー
set-option -g status-style fg=white,bg=black
# ウィンドウリスト
set-window-option -g window-status-style fg=red,dim
set-window-option -g window-status-current-style fg=white,bg=red
# ペイン
set-option -g pane-border-style fg=green,bg=black
set-option -g pane-active-border-style fg=white,bg=yellow
# メッセージテキスト
set-option -g message-style fg=yellow,bg=black

# ステータスバーの設定
set-option -g status-position  top

set-option -g status-left-length 90
set-option -g status-right-length 90

set-option -g status-left '#[fg=green]Session: #S #[fg=yellow]#I #[fg=cyan]#P'
#set-option -g status-left  '#H:[#P]'
set-option -g status-right '#[fg=green][%Y-%m-%d(%a) %H:%M]'
set-option -g status-interval 1
set-option -g status-justify centre

# キーストロークのディレイを減らす
set-option -sg escape-time 1
# ウィンドウのインデックスを1から始める
set-option -g base-index 1
# ペインのインデックスを1から始める
set-window-option -g pane-base-index 1

# ═══════════════════════════════════════════════════════════════
# 追加機能（2026-01-31）
# ═══════════════════════════════════════════════════════════════

# マウス操作有効化
set -g mouse on

# True Color (24bit) 対応
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# コピーモード設定（vi + クリップボード連携）
set-window-option -g mode-keys vi
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"

# スクロールバックバッファ増加
set -g history-limit 50000

# focus-events有効化（Vim等のフォーカス検知用）
set -g focus-events on

# ウィンドウ番号を自動で振り直す
set -g renumber-windows on
